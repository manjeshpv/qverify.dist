{"version":3,"sources":["api/refreshToken/refreshToken.model.js"],"names":[],"mappings":";;AAEA,IAAM,SAAS,QAAQ,QAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,SAAS,iBAAT,CAA2B,SAA3B,EAAsC,SAAtC,EAAiD;AAChE,MAAM,eAAe,UAAU,MAAV,CAAiB,cAAjB,EAAiC;AACpD,QAAI;AACF,YAAM,UAAU,OAAV,CAAkB,EAAlB,CADJ;AAEF,qBAAe,IAFb;AAGF,kBAAY,IAHV;AAIF,iBAAW,KAJT;AAKF,cAAQ;AALN,KADgD;AAQpD,mBAAe;AACb,YAAM,UAAU,MAAV,CAAiB,GAAjB,CADO;AAEb,gBAAU;AACR,aAAK,CAAC,EAAD,EAAK,GAAL;AADG,OAFG;AAKb,iBAAW;AALE,KARqC;AAepD,aAAS;AACP,YAAM,UAAU,IADT;AAEP,iBAAW,KAFJ;AAGP,oBAAc,SAAS,UAAT,GAAsB;AAClC,eAAO,SAAS,GAAT,CAAa,CAAb,EAAgB,QAAhB,CAAP;AACD;AALM,KAf2C;AAsBpD,gBAAY;AACV,YAAM,UAAU,IADN;AAEV,iBAAW,KAFD;AAGV,oBAAc,UAAU;AAHd,KAtBwC;AA2BpD,YAAQ;AACN,YAAM,UAAU,OADV;AAEN,oBAAc,IAFR;AAGN,iBAAW;AAHL;AA3B4C,GAAjC,EAgClB;AACD,eAAW,gBADV;AAED,gBAAY,KAFX;AAGD,iBAAa,IAHZ;;AAKD,kBAAc;AACZ,eADY,qBACF,MADE,EACM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAa,SAAb,CAAuB,OAAO,GAA9B,EAAmC;AACjC,sBAAY;AADqB,SAAnC;;AAIA,qBAAa,SAAb,CAAuB,OAAO,IAA9B,EAAoC;AAClC,sBAAY;AADsB,SAApC;AAGD;AArBW;AALb,GAhCkB,CAArB;;AA8DA,SAAO,YAAP;AACD,CAhED","file":"api/refreshToken/refreshToken.model.js","sourcesContent":["\r\n\r\nconst moment = require('moment');\r\n\r\nmodule.exports = function RefreshTokenModel(sequelize, DataTypes) {\r\n  const RefreshToken = sequelize.define('RefreshToken', {\r\n    id: {\r\n      type: DataTypes.INTEGER(14),\r\n      autoIncrement: true,\r\n      primaryKey: true,\r\n      allowNull: false,\r\n      unique: true,\r\n    },\r\n    refresh_token: {\r\n      type: DataTypes.STRING(256),\r\n      validate: {\r\n        len: [10, 256],\r\n      },\r\n      allowNull: false,\r\n    },\r\n    expires: {\r\n      type: DataTypes.DATE,\r\n      allowNull: false,\r\n      defaultValue: function setExpires() {\r\n        return moment().add(1, 'months');\r\n      },\r\n    },\r\n    created_at: {\r\n      type: DataTypes.DATE,\r\n      allowNull: false,\r\n      defaultValue: DataTypes.NOW,\r\n    },\r\n    status: {\r\n      type: DataTypes.BOOLEAN,\r\n      defaultValue: true,\r\n      allowNull: false,\r\n    },\r\n  }, {\r\n    tableName: 'refresh_tokens',\r\n    timestamps: false,\r\n    underscored: true,\r\n\r\n    classMethods: {\r\n      associate(models) {\r\n        //RefreshToken.belongsToMany(models.Scope, {\r\n        //  through: {\r\n        //    model: models.ItemScope,\r\n        //    unique: false,\r\n        //    scope: {\r\n        //      scopable: 'refresh_token',\r\n        //    },\r\n        //  },\r\n        //  foreignKey: 'scopable_id',\r\n        //  constraints: false,\r\n        //});\r\n\r\n        RefreshToken.belongsTo(models.App, {\r\n          foreignKey: 'app_id',\r\n        });\r\n\r\n        RefreshToken.belongsTo(models.User, {\r\n          foreignKey: 'user_username',\r\n        });\r\n      },\r\n    },\r\n  });\r\n\r\n  return RefreshToken;\r\n};\r\n"],"sourceRoot":"/source/"}