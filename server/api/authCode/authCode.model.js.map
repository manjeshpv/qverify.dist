{"version":3,"sources":["api/authCode/authCode.model.js"],"names":[],"mappings":";;AACA,IAAM,SAAS,QAAQ,QAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,SAAS,aAAT,CAAuB,SAAvB,EAAkC,SAAlC,EAA6C;AAC5D,MAAM,WAAW,UAAU,MAAV,CAAiB,UAAjB,EAA6B;AAC5C,QAAI;AACF,YAAM,UAAU,OAAV,CAAkB,EAAlB,CADJ;AAEF,qBAAe,IAFb;AAGF,kBAAY,IAHV;AAIF,iBAAW,KAJT;AAKF,cAAQ;AALN,KADwC;AAQ5C,eAAW;AACT,YAAM,UAAU,MAAV,CAAiB,GAAjB,CADG;AAET,gBAAU;AACR,aAAK,CAAC,EAAD,EAAK,GAAL;AADG,OAFD;AAKT,iBAAW;AALF,KARiC;AAe5C,aAAS;AACP,YAAM,UAAU,IADT;AAEP,iBAAW,KAFJ;AAGP,oBAAc,SAAS,UAAT,GAAsB;AAClC,eAAO,SAAS,GAAT,CAAa,EAAb,EAAiB,SAAjB,CAAP;AACD;AALM,KAfmC;AAsB5C,gBAAY;AACV,YAAM,UAAU,IADN;AAEV,iBAAW,KAFD;AAGV,oBAAc,UAAU;AAHd,KAtBgC;AA2B5C,YAAQ;AACN,YAAM,UAAU,OADV;AAEN,oBAAc,IAFR;AAGN,iBAAW;AAHL;AA3BoC,GAA7B,EAgCd;AACD,eAAW,YADV;AAED,gBAAY,KAFX;AAGD,iBAAa,IAHZ;;AAKD,kBAAc;AACZ,eADY,qBACF,MADE,EACM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAS,SAAT,CAAmB,OAAO,GAA1B,EAA+B;AAC7B,sBAAY;AADiB,SAA/B;;AAIA,iBAAS,SAAT,CAAmB,OAAO,IAA1B,EAAgC;AAC9B,sBAAY;AADkB,SAAhC;AAGD;AArBW;AALb,GAhCc,CAAjB;;AA8DA,SAAO,QAAP;AACD,CAhED","file":"api/authCode/authCode.model.js","sourcesContent":["\r\nconst moment = require('moment');\r\n\r\nmodule.exports = function AuthCodeModel(sequelize, DataTypes) {\r\n  const AuthCode = sequelize.define('AuthCode', {\r\n    id: {\r\n      type: DataTypes.INTEGER(14),\r\n      autoIncrement: true,\r\n      primaryKey: true,\r\n      allowNull: false,\r\n      unique: true,\r\n    },\r\n    auth_code: {\r\n      type: DataTypes.STRING(256),\r\n      validate: {\r\n        len: [10, 256],\r\n      },\r\n      allowNull: false,\r\n    },\r\n    expires: {\r\n      type: DataTypes.DATE,\r\n      allowNull: false,\r\n      defaultValue: function setExpires() {\r\n        return moment().add(30, 'seconds');\r\n      },\r\n    },\r\n    created_at: {\r\n      type: DataTypes.DATE,\r\n      allowNull: false,\r\n      defaultValue: DataTypes.NOW,\r\n    },\r\n    status: {\r\n      type: DataTypes.BOOLEAN,\r\n      defaultValue: true,\r\n      allowNull: false,\r\n    },\r\n  }, {\r\n    tableName: 'auth_codes',\r\n    timestamps: false,\r\n    underscored: true,\r\n\r\n    classMethods: {\r\n      associate(models) {\r\n        //AuthCode.belongsToMany(models.Scope, {\r\n        //  through: {\r\n        //    model: models.ItemScope,\r\n        //    unique: false,\r\n        //    scope: {\r\n        //      scopable: 'auth_code',\r\n        //    },\r\n        //  },\r\n        //  foreignKey: 'scopable_id',\r\n        //  constraints: false,\r\n        //});\r\n\r\n        AuthCode.belongsTo(models.App, {\r\n          foreignKey: 'app_id',\r\n        });\r\n\r\n        AuthCode.belongsTo(models.User, {\r\n          foreignKey: 'user_username',\r\n        });\r\n      },\r\n    },\r\n  });\r\n\r\n  return AuthCode;\r\n};\r\n"],"sourceRoot":"/source/"}